!function(n,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():n.fpc=e()}(this,function(){"use strict";var i={};function t(e,n){return arguments.length<2?function(n){return t(e,n)}:i.typeOf(n)===e}function r(e,n){return arguments.length<2?function(n){return r(e,n)}:t(e,n)?i.unbox(n):i.failWith(new Error("Expected "+e+", got "+i.typeOf(n)))}return i.compose=function(n){i.expect.fun(n);var e=i.slice(arguments,1);function r(){return n.apply(null,i.slice(arguments).concat(e))}return r["with"]=r.and=function(e){i.expect.fun(e);var t=i.slice(arguments,1);return i.compose(function(){var n=i.unshift(t,r.apply(null,arguments));return e.apply(null,n)})},r.ply=function(){return r.apply(null,arguments)},r},i.pipe=function(n){var t=i.slice(arguments),e={};return e.end=n,e.into=e.then=function(n){var e=t.concat(i.slice(arguments,1));return i.pipe(i.expect.fun(n).apply(null,e))},e},i.id=function(n){return n},i.failWith=function(n){throw n instanceof Error?n:new Error(n)},i.prop=function(n,e){return null==n?void 0:i.is.str(n)&&i.is.num(e)?n.charAt(e):n[e]},i.slice=function(n,e,t){return null==n?n:(arguments.length<3&&(t=n.length),arguments.length<2&&(e=0),i.is.str(n)&&(n=n.split("")),[].slice.call(n,e,t))},i.unshift=function(n,e){return[e].concat(n)},i.reverse=function(n){return i.is.str(n)?i.slice(n).reverse().join(""):i.is.obj(n)?i.slice(n).reverse():n},i.reduce=function(n,e,t){if(i.expect.reduceable(n),i.expect.fun(e),0===n.length){if(arguments.length<3)throw new Error("Invalid call of fpc.reduce() with zero-length value");return t}for(var r=arguments.length<3?i.prop(n,0):e(t,i.prop(n,0)),u=n.length,o=1;o<u;o++)r=e(r,i.prop(n,o));return r},i.map=function(n,t){return i.expect.fun(t),i.reduce(n,function(n,e){return n.push(t(e)),n},[])},i.pair=function(n,e){return[n,e]},i.first=function(n){return i.prop(n,0)},i.second=function(n){return i.prop(n,1)},i.last=function(n){return i.is.num((n||{}).length)?i.prop(n,n.length-1):void 0},i.flip=function(n){return i.expect.fun(n),function(){return n.apply(null,i.reverse(arguments))}},i.sum=function(n){return i.reduce(1<arguments.length?arguments:n,function(n,e){return n+e})},i.cat=function(n){return i.sum.apply(null,i.map(1<arguments.length?arguments:n,String))},i.bound=function(n,e,t){return Math.max(e,Math.min(t,n))},i.unbox=function(n){var e=(n||{}).valueOf();return"object"!=typeof e&&"function"!=typeof e?e:n},i.typeOf=function(n){return null===n?"null":typeof i.unbox(n)},i.is={num:t("number"),str:t("string"),sym:t("symbol"),obj:t("object"),fun:t("function"),bool:t("boolean"),reduceable:function(n){return i.is.num(i.prop(n,"length"))}},i.expect={num:r("number"),str:r("string"),sym:r("symbol"),obj:r("object"),fun:r("function"),bool:r("boolean"),reduceable:function(n){return i.is.reduceable(n)?n:i.failWith(new Error("Expected a reduceable value"))}},i.call=function(n,e){return i.expect.fun(i.prop(n,e)).apply(n,i.slice(arguments,2))},i.pass=function(n){var e=i.slice(arguments,2);return e.unshift(n),i.pipe(arguments).into(i.second).then(i.expect.fun).end.apply(null,e),n},i.log="object"!=typeof console?i.id:function(n){return console.log.apply(null,arguments),n},i.show=function(n){return i.log.apply(null,i.pipe(arguments).into(i.slice,1).then(i.pass,i.call,"push",n).end),n},i});
